<!--pages/address-list/address-list.wxml-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <loading wx:if="{{loading && addressList.length === 0}}" />
  
  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:if="{{hasError && !loading}}" class="error-container">
    <view class="error-icon">âš ï¸</view>
    <view class="error-text">åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•</view>
    <button class="retry-btn" bindtap="onRetry">é‡æ–°åŠ è½½</button>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{isEmpty && !loading && !hasError}}" class="empty-container">
    <view class="empty-icon">ğŸ“</view>
    <view class="empty-text">æš‚æ— æ”¶è´§åœ°å€</view>
    <view class="empty-desc">æ·»åŠ æ”¶è´§åœ°å€ï¼Œäº«å—ä¾¿æ·è´­ç‰©</view>
  </view>
  
  <!-- åœ°å€åˆ—è¡¨ -->
  <view wx:if="{{!loading && !hasError && !isEmpty}}" class="address-list">
    <view 
      wx:for="{{addressList}}" 
      wx:key="id" 
      class="address-item {{isSelectMode ? 'select-mode' : ''}} {{item.isDefault ? 'default' : ''}}"
      bindtap="{{isSelectMode ? 'onSelectAddress' : ''}}"
      data-id="{{item.id}}"
    >
      <!-- é»˜è®¤æ ‡è¯† -->
      <view wx:if="{{item.isDefault}}" class="default-tag">é»˜è®¤</view>
      
      <!-- åœ°å€ä¿¡æ¯ -->
      <view class="address-info">
        <view class="address-header">
          <text class="name">{{item.name}}</text>
          <text class="phone">{{item.phone}}</text>
        </view>
        <view class="address-detail">
          <text class="province">{{item.province}}</text>
          <text class="city">{{item.city}}</text>
          <text class="district">{{item.district}}</text>
          <text class="detail">{{item.detail}}</text>
        </view>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view wx:if="{{!isSelectMode}}" class="address-actions">
        <view class="action-btn" bindtap="onEditAddress" data-id="{{item.id}}">
          <text class="action-icon">âœï¸</text>
          <text class="action-text">ç¼–è¾‘</text>
        </view>
        <view class="action-btn" bindtap="onDeleteAddress" data-id="{{item.id}}">
          <text class="action-icon">ğŸ—‘ï¸</text>
          <text class="action-text">åˆ é™¤</text>
        </view>
        <view wx:if="{{!item.isDefault}}" class="action-btn" bindtap="onSetDefault" data-id="{{item.id}}">
          <text class="action-icon">â­</text>
          <text class="action-text">è®¾ä¸ºé»˜è®¤</text>
        </view>
      </view>
      
      <!-- é€‰æ‹©æ¨¡å¼ä¸‹çš„é€‰ä¸­æ ‡è¯† -->
      <view wx:if="{{isSelectMode}}" class="select-indicator">
        <view class="select-icon {{selectedAddressId === item.id ? 'selected' : ''}}">
          {{selectedAddressId === item.id ? 'âœ“' : 'â—‹'}}
        </view>
      </view>
    </view>
  </view>
  
  <!-- æ·»åŠ åœ°å€æŒ‰é’® -->
  <view wx:if="{{!isSelectMode}}" class="add-address-btn" bindtap="onAddAddress">
    <text class="add-icon">+</text>
    <text class="add-text">æ·»åŠ æ–°åœ°å€</text>
  </view>
</view>