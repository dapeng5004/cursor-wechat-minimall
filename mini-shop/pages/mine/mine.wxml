<!--pages/mine/mine.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section" bindtap="onUserTap">
    <view class="user-info" wx:if="{{userInfo}}">
      <view class="avatar">
        <safe-image 
          src="{{userInfo.avatarUrl}}" 
          mode="aspectFill"
          default-src="/images/default/avatar.png"
        />
      </view>
      <view class="user-detail">
        <view class="nickname">{{userInfo.nickName}}</view>
        <view class="user-id">ç”¨æˆ·ID: {{userInfo.userId || 'æœªçŸ¥'}}</view>
      </view>
    </view>
    <view class="login-btn" wx:else>
      <view class="login-icon">ðŸ‘¤</view>
      <view class="login-text">ç‚¹å‡»ç™»å½•</view>
    </view>
  </view>

  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-list">
    <view class="menu-item" 
          wx:for="{{menuList}}" 
          wx:key="id"
          bindtap="onNavigate"
          data-url="{{item.url}}">
      <view class="menu-icon">{{item.icon}}</view>
      <view class="menu-name">{{item.name}}</view>
      <view class="menu-arrow">></view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section" wx:if="{{userInfo}}">
    <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- åŠ è½½ç»„ä»¶ -->
  <loading 
    show="{{loading}}" 
    type="spinner" 
    text="å¤„ç†ä¸­..." 
    mask="{{true}}"
  />
</view>